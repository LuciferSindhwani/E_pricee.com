<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Game Zone - Price Comparison</title>
    <style>
        :root {
            --deep-space: #070B34;
            --cosmic-purple: #6B46C1;
            --cosmic-blue: #3182CE;
            --cosmic-pink: #D53F8C;
            --star-white: #F7FAFC;
            --cosmic-green: #38B2AC;
            --cosmic-yellow: #ECC94B;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: var(--deep-space);
            color: var(--star-white);
            overflow-x: hidden;
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 4s infinite ease-in-out;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 1; }
        }
        
        .nebula {
            position: fixed;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at bottom, rgba(107, 70, 193, 0.2) 0%, transparent 70%);
            pointer-events: none;
            z-index: 0;
        }
        
        .header {
            position: relative;
            padding: 20px;
            text-align: center;
            background: rgba(7, 11, 52, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--cosmic-purple);
            z-index: 10;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px var(--cosmic-purple);
            background: linear-gradient(90deg, var(--cosmic-blue), var(--cosmic-purple), var(--cosmic-pink));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }
        
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }
        
        .game-card {
            background: rgba(7, 11, 52, 0.8);
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            border: 1px solid rgba(107, 70, 193, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(107, 70, 193, 0.5);
        }
        
        .game-card-header {
            height: 160px;
            position: relative;
            overflow: hidden;
        }
        
        .game-card-header img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .game-card-body {
            padding: 20px;
        }
        
        .game-card h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--star-white);
        }
        
        .game-card p {
            font-size: 0.9rem;
            margin-bottom: 20px;
            color: rgba(247, 250, 252, 0.8);
        }
        
        .btn {
            display: inline-block;
            padding: 8px 16px;
            background: linear-gradient(90deg, var(--cosmic-purple), var(--cosmic-blue));
            color: var(--star-white);
            border: none;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(107, 70, 193, 0.7);
        }
        
        .featured-game {
            background: linear-gradient(135deg, rgba(107, 70, 193, 0.2), rgba(49, 130, 206, 0.2));
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(107, 70, 193, 0.5);
        }
        
        .featured-game h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--cosmic-yellow);
            text-shadow: 0 0 10px rgba(236, 201, 75, 0.5);
        }
        
        .featured-game p {
            margin-bottom: 20px;
            max-width: 600px;
        }
        
        .cosmic-ship {
            width: 50px;
            height: 50px;
            position: absolute;
            transition: all 0.2s ease;
            z-index: 100;
            user-select: none;
        }
        
        .cosmic-ship img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .price-portal {
            position: relative;
            padding: 20px;
            background: linear-gradient(135deg, rgba(213, 63, 140, 0.2), rgba(56, 178, 172, 0.2));
            border-radius: 15px;
            margin-top: 40px;
            text-align: center;
            border: 1px solid rgba(213, 63, 140, 0.5);
        }
        
        .price-portal h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--cosmic-pink);
            text-shadow: 0 0 10px rgba(213, 63, 140, 0.5);
        }
        
        .portal-animation {
            width: 200px;
            height: 200px;
            margin: 20px auto;
            background: radial-gradient(circle, var(--cosmic-blue) 0%, var(--cosmic-purple) 50%, transparent 100%);
            border-radius: 50%;
            box-shadow: 0 0 30px var(--cosmic-purple);
            position: relative;
            animation: pulse 3s infinite ease-in-out;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(0.95); box-shadow: 0 0 30px var(--cosmic-purple); }
            50% { transform: scale(1.05); box-shadow: 0 0 50px var(--cosmic-purple); }
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: rgba(107, 70, 193, 0.3);
            border: 1px solid var(--cosmic-purple);
            color: var(--star-white);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .control-btn:hover {
            background: rgba(107, 70, 193, 0.6);
            transform: scale(1.05);
        }
        
        .score-display {
            font-size: 1.2rem;
            margin: 20px 0;
            color: var(--cosmic-yellow);
        }
        
        .rewards-section {
            margin-top: 40px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(56, 178, 172, 0.2), rgba(236, 201, 75, 0.2));
            border-radius: 15px;
            text-align: center;
            border: 1px solid rgba(56, 178, 172, 0.5);
        }
        
        .rewards-section h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: var(--cosmic-green);
            text-shadow: 0 0 10px rgba(56, 178, 172, 0.5);
        }
        
        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .reward-item {
            background: rgba(7, 11, 52, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(56, 178, 172, 0.5);
            transition: transform 0.3s ease;
        }
        
        .reward-item:hover {
            transform: translateY(-5px);
        }
        
        .reward-item h4 {
            margin-bottom: 10px;
            color: var(--cosmic-yellow);
        }
        
        .floating-asteroids {
            position: absolute;
            width: 20px;
            height: 20px;
            background: radial-gradient(circle, #ccc, #999);
            border-radius: 50%;
            box-shadow: inset -5px -5px 5px rgba(0,0,0,0.5);
            pointer-events: none;
            z-index: 50;
            animation: float 15s linear infinite;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(1000px, 500px) rotate(360deg); }
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 40px;
            border-top: 1px solid var(--cosmic-purple);
            background: rgba(7, 11, 52, 0.8);
            backdrop-filter: blur(10px);
            position: relative;
            z-index: 10;
        }
        
        /* Cosmic Quiz Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(7, 11, 52, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, rgba(107, 70, 193, 0.3), rgba(49, 130, 206, 0.3));
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 90%;
            position: relative;
            border: 1px solid var(--cosmic-purple);
            box-shadow: 0 0 30px rgba(107, 70, 193, 0.5);
        }
        
        .close-modal {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--star-white);
            background: none;
            border: none;
        }
        
        /* Animation for floating elements */
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }
        
        /* Game controls instructions */
        .game-instructions {
            background: rgba(107, 70, 193, 0.2);
            border: 1px solid var(--cosmic-purple);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: left;
            font-size: 0.9rem;
        }
        
        .game-instructions h4 {
            color: var(--cosmic-yellow);
            margin-bottom: 10px;
        }
        
        .game-instructions ul {
            list-style-type: none;
            padding-left: 10px;
        }
        
        .game-instructions li {
            margin-bottom: 5px;
        }
        
        .game-instructions span.key {
            display: inline-block;
            background: rgba(49, 130, 206, 0.3);
            border: 1px solid var(--cosmic-blue);
            padding: 2px 6px;
            border-radius: 4px;
            margin: 0 3px;
        }
        
        .bullet {
            position: absolute;
            width: 5px;
            height: 15px;
            background: var(--cosmic-blue);
            border-radius: 2px;
            box-shadow: 0 0 5px var(--cosmic-blue);
        }
        
        .asteroid {
            position: absolute;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: radial-gradient(circle, #ccc, #555);
            box-shadow: inset -5px -5px 5px rgba(0,0,0,0.5);
            z-index: 10;
        }
    </style>
</head>
<body>
    <!-- Stars Background -->
    <div class="stars" id="starsContainer"></div>
    <div class="nebula"></div>
    
    <!-- Header -->
    <header class="header">
        <h1>COSMIC GAME ZONE</h1>
        <p>Play games, earn rewards, and find the best deals across the universe!</p>
    </header>
    
    <!-- Main Content -->
    <div class="container">
        <!-- Featured Game - Price Asteroid Blaster -->
        <div class="featured-game">
            <h2>Price Asteroid Blaster</h2>
            <p>Blast through high prices and collect the best deals! Each asteroid reveals a special discount!</p>
            
            <!-- Game Instructions -->
            <div class="game-instructions">
                <h4>How to Play:</h4>
                <ul>
                    <li><span class="key">←</span> or <span class="key">A</span>: Move ship left</li>
                    <li><span class="key">→</span> or <span class="key">D</span>: Move ship right</li>
                    <li><span class="key">Space</span>: Shoot lasers</li>
                    <li>Hit price asteroids to reveal discounts!</li>
                </ul>
            </div>
            
            <div id="game-area" style="width: 100%; height: 300px; position: relative; overflow: hidden; border-radius: 10px; border: 2px solid var(--cosmic-blue); background: rgba(7, 11, 52, 0.5); margin: 20px 0;">
                <!-- Game elements will be added here by JavaScript -->
                <div id="ship" class="cosmic-ship" style="bottom: 20px; left: 50%;">
                    <img src="/api/placeholder/50/50" alt="Spaceship">
                </div>
            </div>
            
            <div class="game-controls">
                <button class="control-btn" id="start-game">Start Game</button>
                <button class="control-btn" id="pause-game">Pause</button>
            </div>
            
            <div class="score-display">
                Score: <span id="game-score">0</span> | Deals Found: <span id="deals-found">0</span>
            </div>
        </div>
        
        <!-- Games Grid -->
        <h2 style="text-align: center; margin-bottom: 20px; color: var(--cosmic-blue);">More Cosmic Games</h2>
        <div class="games-grid">
            <div class="game-card">
                <div class="game-card-header">
                    <img src="/api/placeholder/400/160" alt="Cosmic Quiz">
                </div>
                <div class="game-card-body">
                    <h3>Cosmic Quiz</h3>
                    <p>Test your knowledge about products and prices across the galaxy. Every correct answer earns you discount points!</p>
                    <button class="btn" id="open-quiz">Play Now</button>
                </div>
            </div>
            
            <div class="game-card">
                <div class="game-card-header">
                    <img src="/api/placeholder/400/160" alt="Deal Matcher">
                </div>
                <div class="game-card-body">
                    <h3>Deal Matcher</h3>
                    <p>Match products with their best prices in this memory-style game. Complete levels to earn shopping vouchers!</p>
                    <button class="btn">Play Now</button>
                </div>
            </div>
            
            <div class="game-card">
                <div class="game-card-header">
                    <img src="/api/placeholder/400/160" alt="Price Predictor">
                </div>
                <div class="game-card-body">
                    <h3>Price Predictor</h3>
                    <p>Guess the price of products before they're revealed! The closer your guess, the more points you earn.</p>
                    <button class="btn">Play Now</button>
                </div>
            </div>
        </div>
        
        <!-- Price Portal Section -->
        <div class="price-portal">
            <h2>The Price Portal</h2>
            <p>Jump through dimensions to find the absolute best prices across multiple retailers!</p>
            
            <div class="portal-animation">
                <!-- Portal animation here -->
            </div>
            
            <a href="#" class="btn">Enter the Portal</a>
        </div>
        
        <!-- Rewards Section -->
        <div class="rewards-section">
            <h2>Cosmic Rewards</h2>
            <p>Convert your game points into real savings! The more you play, the more you save.</p>
            
            <div class="rewards-grid">
                <div class="reward-item">
                    <h4>5% Discount</h4>
                    <p>500 Cosmic Points</p>
                    <button class="btn">Claim</button>
                </div>
                
                <div class="reward-item">
                    <h4>Free Shipping</h4>
                    <p>1000 Cosmic Points</p>
                    <button class="btn">Claim</button>
                </div>
                
                <div class="reward-item">
                    <h4>10% Discount</h4>
                    <p>2000 Cosmic Points</p>
                    <button class="btn">Claim</button>
                </div>
                
                <div class="reward-item">
                    <h4>Mystery Box</h4>
                    <p>3000 Cosmic Points</p>
                    <button class="btn">Claim</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Cosmic Quiz Modal -->
    <div class="modal" id="quiz-modal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            <h2 style="text-align: center; margin-bottom: 20px; color: var(--cosmic-yellow);">Cosmic Price Quiz</h2>
            
            <div id="quiz-container">
                <div id="question" style="font-size: 1.2rem; margin-bottom: 20px;">Which of these products typically has the lowest price?</div>
                
                <div id="answers" style="display: flex; flex-direction: column; gap: 10px;">
                    <button class="btn" style="text-align: left; background: rgba(107, 70, 193, 0.3); margin-bottom: 5px;">Product A - Premium Headphones</button>
                    <button class="btn" style="text-align: left; background: rgba(107, 70, 193, 0.3); margin-bottom: 5px;">Product B - Wireless Earbuds</button>
                    <button class="btn" style="text-align: left; background: rgba(107, 70, 193, 0.3); margin-bottom: 5px;">Product C - Wired Earphones</button>
                    <button class="btn" style="text-align: left; background: rgba(107, 70, 193, 0.3); margin-bottom: 5px;">Product D - Gaming Headset</button>
                </div>
                
                <div id="quiz-status" style="margin-top: 20px;">
                    Question: <span id="question-number">1</span>/10 | Points: <span id="quiz-points">0</span>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>&copy; 2025 Cosmic Price Comparison | All Rights Reserved</p>
    </footer>

    <script>
        // Generate stars in the background
        const starsContainer = document.getElementById('starsContainer');
        const numStars = 200;
        
        for (let i = 0; i < numStars; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.top = `${Math.random() * 100}%`;
            star.style.left = `${Math.random() * 100}%`;
            star.style.animationDelay = `${Math.random() * 4}s`;
            
            // Different sized stars
            const size = Math.random() * 3;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            
            // Some stars with color
            if (Math.random() > 0.8) {
                const colors = ['#8BE9FD', '#FF79C6', '#50FA7B', '#FFB86C'];
                star.style.background = colors[Math.floor(Math.random() * colors.length)];
                star.style.boxShadow = `0 0 3px ${star.style.background}`;
            }
            
            starsContainer.appendChild(star);
        }
        
        // Add floating asteroids in the background
        for (let i = 0; i < 5; i++) {
            const asteroid = document.createElement('div');
            asteroid.className = 'floating-asteroids';
            asteroid.style.top = `${Math.random() * 100}%`;
            asteroid.style.left = `${Math.random() * 100}%`;
            asteroid.style.width = `${Math.random() * 30 + 10}px`;
            asteroid.style.height = asteroid.style.width;
            asteroid.style.animationDuration = `${Math.random() * 20 + 10}s`;
            asteroid.style.animationDelay = `${Math.random() * 5}s`;
            
            document.body.appendChild(asteroid);
        }
        
        // Ship movement and game variables
        const ship = document.getElementById('ship');
        const gameArea = document.getElementById('game-area');
        let gameActive = false;
        let gameScore = 0;
        let dealsFound = 0;
        let asteroids = [];
        let bullets = [];
        let keys = {};
        let shipPosition = 50; // Initial position in percentage
        let gameAreaWidth = gameArea.clientWidth;
        let shipWidth = 50; // Ship width in pixels
        let autoShootInterval = null;
        
        // Handle game area resize
        function updateGameAreaDimensions() {
            gameAreaWidth = gameArea.clientWidth;
            // Update ship position with new dimensions
            updateShipPosition();
        }
        
        window.addEventListener('resize', updateGameAreaDimensions);
        
        // Update ship position based on current shipPosition percentage
        function updateShipPosition() {
            const pixelPosition = (gameAreaWidth - shipWidth) * (shipPosition / 100);
            ship.style.left = `${pixelPosition}px`;
        }
        
        // Initialize ship position correctly
        window.addEventListener('load', () => {
            shipWidth = ship.offsetWidth;
            updateGameAreaDimensions();
            // Set initial absolute position
            shipPosition = 50;
            const initialPosition = (gameAreaWidth - shipWidth) / 2;
            ship.style.left = `${initialPosition}px`;
        });
        
        // Keyboard controls event listeners
        window.addEventListener('keydown', (e) => {
            keys[e.key] = true;
            
            // Prevent space from scrolling the page
            if (e.key === ' ' && gameActive) {
                e.preventDefault();
                shootBullet();
            }
        });
        
        window.addEventListener('keyup', (e) => {
            keys[e.key] = false;
        });
        
        // Ship movement using keyboard
        function moveShip() {
            if (!gameActive) return;
            
            // Calculate ship movement speed based on game area width
            const moveSpeed = 2; // Percentage of game area width to move
            
            // Move left with arrow left or A key
            if ((keys['ArrowLeft'] || keys['a'] || keys['A']) && shipPosition > 0) {
                shipPosition = Math.max(0, shipPosition - moveSpeed);
            }
            
            // Move right with arrow right or D key
            if ((keys['ArrowRight'] || keys['d'] || keys['D']) && shipPosition < 100) {
                shipPosition = Math.min(100, shipPosition + moveSpeed);
            }
            
            // Update ship position
            updateShipPosition();
            
            // Request next animation frame
            requestAnimationFrame(moveShip);
        }
        
        // Also support mouse movement for more options
        gameArea.addEventListener('mousemove', (e) => {
            if (!gameActive) return;
            
            const rect = gameArea.getBoundingClientRect();
            const mouseX = e.clientX - rect.left;
            
            // Calculate position as percentage of game area width
            shipPosition = (mouseX / gameAreaWidth) * 100;
            
            // Keep within bounds
            shipPosition = Math.max(0, Math.min(100, shipPosition));
            
            // Update ship position
            updateShipPosition();
        });
        
        // Start game
        document.getElementById('start-game').addEventListener('click', () => {
            if (!gameActive) {
                gameActive = true;
                gameScore = 0;
                dealsFound = 0;
                document.getElementById('game-score').textContent = gameScore;
                document.getElementById('deals-found').textContent = dealsFound;
                
                // Clear any existing asteroids and bullets
                clearExistingGameObjects();
                
                // Start ship movement animation
                requestAnimationFrame(moveShip);
                
                // Give game area focus for keyboard controls
                gameArea.focus();
                
                // Start generating asteroids (slower at first)
                setTimeout(() => generateAsteroids(), 1000);
                
                // Update button text
                document.getElementById('start-game').textContent = 'Restart Game';
                document.getElementById('pause-game').textContent = 'Pause';
                
                // Focus the game area 
                gameArea.setAttribute('tabindex', '0');
                gameArea.focus();
            } else {
                // Restart the game
                resetGame();
            }
        });
        
        // Clear existing game objects
        function clearExistingGameObjects() {
            // Remove existing asteroids
            asteroids.forEach(asteroid => {
                if (asteroid.parentNode === gameArea) {
                    gameArea.removeChild(asteroid);
                }
            });
            asteroids = [];
            
            // Remove existing bullets
            bullets.forEach(bullet => {
                if (bullet.parentNode === gameArea) {
                    gameArea.removeChild(bullet);
                }
            });
            bullets = [];
        }
        
        // Reset game
        function resetGame() {
            // Clear existing game objects
            clearExistingGameObjects();
            
            // Reset score
            gameScore = 0;
            dealsFound = 0;
            document.getElementById('game-score').textContent = gameScore;
            document.getElementById('deals-found').textContent = dealsFound;
            
            // Re-center ship
            shipPosition = 50;
            updateShipPosition();
            
            // Restart asteroid generation
            setTimeout(() => generateAsteroids(), 1000);
        }
        
        // Pause game
        document.getElementById('pause-game').addEventListener('click', () => {
            gameActive = !gameActive;
            document.getElementById('pause-game').textContent = gameActive ? 'Pause' : 'Resume';
            
            if (gameActive) {
                // Resume game
                requestAnimationFrame(moveShip);
            }
        });
        
        // Generate asteroids - more slowly and with larger hitboxes
        function generateAsteroids() {
            if (!gameActive) return;
            
            const asteroid = document.createElement('div');
            asteroid.className = 'asteroid';
            
            // Position asteroid at random x position at top of game area
            asteroid.style.left = `${Math.random() * (gameArea.clientWidth - 45)}px`;
            asteroid.style.top = '0px';
            
            // Store discount value
            asteroid.dataset.discount = Math.floor(Math.random() * 50) + 5; // 5-55% discount
            
            gameArea.appendChild(asteroid);
            asteroids.push(asteroid);
            
            // Move asteroid down
            let position = 0;
            const moveSpeed = 1.5; // Reduced speed for easier gameplay
            
            const moveAsteroid = setInterval(() => {
                if (!gameActive) return;
                
                position += moveSpeed;
                asteroid.style.top = `${position}px`;
                
                // Check if asteroid hit bottom
                if (position > gameArea.clientHeight) {
                    clearInterval(moveAsteroid);
                    if (asteroid.parentNode === gameArea) {
                        gameArea.removeChild(asteroid);
                    }
                    asteroids = asteroids.filter(a => a !== asteroid);
                    
                    // Missed asteroid - no penalty
                }
                
                // Check for collision with ship
                const shipRect = ship.getBoundingClientRect();
                const asteroidRect = asteroid.getBoundingClientRect();
                
                if (
                    shipRect.left < asteroidRect.right &&
                    shipRect.right > asteroidRect.left &&
                    shipRect.top < asteroidRect.bottom &&
                    shipRect.bottom > asteroidRect.top
                ) {
                    // Ship hit by asteroid
                    clearInterval(moveAsteroid);
                    if (asteroid.parentNode === gameArea) {
                        gameArea.removeChild(asteroid);
                    }
                    asteroids = asteroids.filter(a => a !== asteroid);
                    
                    // Game continues but with a small penalty
                    gameScore = Math.max(0, gameScore - 10);
                    document.getElementById('game-score').textContent = gameScore;
                    
                    // Visual feedback for hit
                    ship.style.opacity = '0.5';
                    setTimeout(() => {
                        ship.style.opacity = '1';
                    }, 300);
                }
                
                // Check for collision with any bullets
                bullets.forEach(bullet => {
                    const bulletRect = bullet.getBoundingClientRect();
                    
                    if (
                        bulletRect.left < asteroidRect.right &&
                        bulletRect.right > asteroidRect.left &&
                        bulletRect.top < asteroidRect.bottom &&
                        bulletRect.bottom > asteroidRect.top
                    ) {
                        // Bullet hit asteroid
                        clearInterval(moveAsteroid);
                        
                        // Show the discount
                        const discount = asteroid.dataset.discount;
                        
                        // Create a visual effect for the hit
                        const explosion = document.createElement('div');
                        explosion.style.position = 'absolute';
                        explosion.style.left = asteroid.style.left;
                        explosion.style.top = asteroid.style.top;
                        explosion.style.width = '60px';
                        explosion.style.height = '60px';
                        explosion.style.borderRadius = '50%';
                        explosion.style.background = 'radial-gradient(circle, var(--cosmic-yellow) 0%, transparent 70%)';
                        explosion.style.display = 'flex';
                        explosion.style.alignItems = 'center';
                        explosion.style.justifyContent = 'center';
                        explosion.style.fontSize = '18px';
                        explosion.style.fontWeight = 'bold';
                        explosion.style.color = 'var(--star-white)';
                        explosion.textContent = discount + '%';
                        explosion.style.zIndex = '20';
                        explosion.style.animation = 'pulse 1s forwards';
                        
                        gameArea.appendChild(explosion);
                        
                        // Remove asteroid and bullet
                        if (asteroid.parentNode === gameArea) {
                            gameArea.removeChild(asteroid);
                        }
                        
                        if (bullet.parentNode === gameArea) {
                            gameArea.removeChild(bullet);
                        }
                        
                        asteroids = asteroids.filter(a => a !== asteroid);
                        bullets = bullets.filter(b => b !== bullet);
                        
                        // Update score based on discount value
                        gameScore += parseInt(discount);
                        dealsFound++;
                        
                        document.getElementById('game-score').textContent = gameScore;
                        document.getElementById('deals-found').textContent = dealsFound;
                        
                        // Remove the explosion effect after animation completes
                        setTimeout(() => {
                            if (explosion.parentNode === gameArea) {
                                gameArea.removeChild(explosion);
                            }
                        }, 1000);
                    }
                });
                
            }, 16); // Update every ~16ms for smooth 60fps
            
            // Generate next asteroid after a delay (speed increases with score)
            const minDelay = Math.max(500, 2000 - (dealsFound * 50));
            setTimeout(() => generateAsteroids(), minDelay);
        }
        
        // Shoot bullets
        function shootBullet() {
            if (!gameActive) return;
            
            const bullet = document.createElement('div');
            bullet.className = 'bullet';
            
            // Position bullet at ship's position
            const shipRect = ship.getBoundingClientRect();
            const gameAreaRect = gameArea.getBoundingClientRect();
            
            const bulletLeft = shipRect.left + (shipRect.width / 2) - 2 - gameAreaRect.left;
            bullet.style.left = `${bulletLeft}px`;
            bullet.style.bottom = '40px'; // Start from ship's position
            
            gameArea.appendChild(bullet);
            bullets.push(bullet);
            
            // Move bullet up
            let position = gameArea.clientHeight - 40;
            const moveSpeed = 5;
            
            const moveBullet = setInterval(() => {
                if (!gameActive) return;
                
                position -= moveSpeed;
                bullet.style.bottom = `${position}px`;
                
                // Remove bullet when it reaches top
                if (position < 0) {
                    clearInterval(moveBullet);
                    if (bullet.parentNode === gameArea) {
                        gameArea.removeChild(bullet);
                    }
                    bullets = bullets.filter(b => b !== bullet);
                }
            }, 16);
        }
        
        // Cosmic Quiz functionality
        const quizModal = document.getElementById('quiz-modal');
        const closeQuizBtn = document.querySelector('.close-modal');
        const openQuizBtn = document.getElementById('open-quiz');
        
        openQuizBtn.addEventListener('click', () => {
            quizModal.style.display = 'flex';
            loadQuestion();
        });
        
        closeQuizBtn.addEventListener('click', () => {
            quizModal.style.display = 'none';
        });
        
        // Also close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === quizModal) {
                quizModal.style.display = 'none';
            }
        });
        
        // Sample quiz questions
        const quizQuestions = [
            {
                question: "Which of these products typically has the lowest price?",
                answers: [
                    "Product A - Premium Headphones",
                    "Product B - Wireless Earbuds",
                    "Product C - Wired Earphones",
                    "Product D - Gaming Headset"
                ],
                correct: 2 // Index of correct answer (C - Wired Earphones)
            },
            {
                question: "Which shopping strategy typically saves the most money?",
                answers: [
                    "Buying everything at one store",
                    "Price comparison across different retailers",
                    "Shopping only during holiday sales",
                    "Buying only premium brands"
                ],
                correct: 1 // Price comparison
            },
            {
                question: "Which time of year typically has the best deals on electronics?",
                answers: [
                    "Spring",
                    "Summer",
                    "Fall",
                    "Winter"
                ],
                correct: 3 // Winter (holiday sales)
            },
            {
                question: "What does the term 'MSRP' stand for?",
                answers: [
                    "Most Suitable Retail Price",
                    "Manufacturer's Suggested Retail Price",
                    "Maximum Standard Retail Price",
                    "Minimum Store Required Price"
                ],
                correct: 1 // Manufacturer's Suggested Retail Price
            },
            {
                question: "Which of these payment methods usually offers the most consumer protection?",
                answers: [
                    "Cash",
                    "Debit card",
                    "Credit card",
                    "Bank transfer"
                ],
                correct: 2 // Credit card
            }
        ];
        
        let currentQuestion = 0;
        let quizPoints = 0;
        
        function loadQuestion() {
            if (currentQuestion >= quizQuestions.length) {
                // End of quiz
                document.getElementById('quiz-container').innerHTML = `
                    <h3>Quiz Complete!</h3>
                    <p>Your final score: ${quizPoints} points</p>
                    <p>You've earned ${quizPoints * 10} Cosmic Points for your rewards!</p>
                    <button class="btn" onclick="quizModal.style.display='none'">Close</button>
                `;
                
                // Add points to game
                gameScore += quizPoints * 5;
                document.getElementById('game-score').textContent = gameScore;
                
                // Reset for next quiz
                currentQuestion = 0;
                quizPoints = 0;
                return;
            }
            
            const question = quizQuestions[currentQuestion];
            document.getElementById('question').textContent = question.question;
            
            const answersContainer = document.getElementById('answers');
            answersContainer.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'btn';
                button.style.textAlign = 'left';
                button.style.background = 'rgba(107, 70, 193, 0.3)';
                button.style.marginBottom = '5px';
                button.textContent = answer;
                
                button.addEventListener('click', () => {
                    // Check if answer is correct
                    if (index === question.correct) {
                        button.style.background = 'rgba(56, 178, 172, 0.5)';
                        quizPoints += 10;
                    } else {
                        button.style.background = 'rgba(213, 63, 140, 0.5)';
                        // Highlight correct answer
                        const correctButton = answersContainer.children[question.correct];
                        correctButton.style.background = 'rgba(56, 178, 172, 0.5)';
                    }
                    
                    // Update points display
                    document.getElementById('quiz-points').textContent = quizPoints;
                    
                    // Disable all buttons
                    Array.from(answersContainer.children).forEach(btn => {
                        btn.disabled = true;
                    });
                    
                    // Move to next question after delay
                    setTimeout(() => {
                        currentQuestion++;
                        document.getElementById('question-number').textContent = currentQuestion + 1;
                        loadQuestion();
                    }, 1500);
                });
                
                answersContainer.appendChild(button);
            });
            
            // Update question number
            document.getElementById('question-number').textContent = currentQuestion + 1;
        }
    </script>
</body>
</html>